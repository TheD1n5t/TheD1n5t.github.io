<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ionia Challenge</title>
  <style>
    body {
      background-color: #0e1629;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
    }
    h1 {
      margin-top: 20px;
    }
    .rank {
      font-size: 1.2em;
      margin-bottom: 10px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }
    .champion {
      background-color: #122038;
      border: 2px solid #1f3b5c;
      padding: 10px;
      border-radius: 8px;
    }
    .champion img {
      width: 50px;
      border-radius: 50%;
    }
    .champion-name {
      font-weight: bold;
      margin: 5px 0;
    }
    .score {
      font-size: 0.9em;
    }
    .win, .loss {
      cursor: pointer;
      padding: 2px 6px;
      margin: 0 4px;
      border-radius: 4px;
    }
    .win { background: #3fa34d; }
    .loss { background: #d44d5c; }
    .selector {
      margin: 20px auto;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    select {
      padding: 5px 10px;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <h1>IONIA CHALLENGE</h1>
  <div class="selector">
    <label>
      Spieler wählen:
      <select id="playerSelect" onchange="changePlayer()">
        <option value="Krischan">Krischan</option>
        <option value="Anna">Anna</option>
      </select>
    </label>
  </div>
  <div class="rank" id="rankDisplay">Gold II – 0 LP<br>0 Games</div>
  <div class="grid" id="championGrid"></div>

  <script>
    const champions = [
      "Ahri", "Akali", "Hwei", "Irelia", "Ivern",
      "Jhin", "Karma", "Kayn", "Kennen", "Lee Sin",
      "Lillia", "Master Yi", "Wukong", "Rakan", "Sett",
      "Shen", "Syndra", "Varus", "Xayah", "Xin Zhao",
      "Yasuo", "Yone", "Zed"
    ];

    let currentPlayer = localStorage.getItem('ioniaActivePlayer') || 'Krischan';
    document.getElementById('playerSelect').value = currentPlayer;

    let state = {};
    const saved = localStorage.getItem('ioniaTracker_' + currentPlayer);
    if (saved) {
      state = JSON.parse(saved);
    } else {
      champions.forEach(name => {
        state[name] = { w: 0, l: 0 };
      });
    }

    const grid = document.getElementById('championGrid');

    function renderGrid() {
      grid.innerHTML = '';
      champions.forEach(name => {
        const div = document.createElement('div');
        div.className = 'champion';
        div.innerHTML = `
          <img src="https://ddragon.leagueoflegends.com/cdn/latest/img/champion/${name.replace(' ', '')}.png" onerror="this.src='https://via.placeholder.com/50'">
          <div class="champion-name">${name}</div>
          <div class="score" id="score-${name}">W / L<br>${state[name].w} / ${state[name].l}</div>
          <div>
            <span class="win" onclick="updateScore('${name}', 'w')">+W</span>
            <span class="loss" onclick="updateScore('${name}', 'l')">+L</span>
          </div>
        `;
        grid.appendChild(div);
      });
      updateRank();
    }

    function updateScore(champ, type) {
      state[champ][type]++;
      document.getElementById(`score-${champ}`).innerHTML = `W / L<br>${state[champ].w} / ${state[champ].l}`;
      saveState();
      updateRank();
    }

    function saveState() {
      localStorage.setItem('ioniaTracker_' + currentPlayer, JSON.stringify(state));
    }

    function updateRank() {
      const totalGames = Object.values(state).reduce((sum, s) => sum + s.w + s.l, 0);
      const totalWins = Object.values(state).reduce((sum, s) => sum + s.w, 0);
      document.getElementById('rankDisplay').innerHTML = `Gold II – ${totalWins * 10} LP<br>${totalGames} Games`;
    }

    function changePlayer() {
      currentPlayer = document.getElementById('playerSelect').value;
      localStorage.setItem('ioniaActivePlayer', currentPlayer);
      const newSave = localStorage.getItem('ioniaTracker_' + currentPlayer);
      if (newSave) {
        state = JSON.parse(newSave);
      } else {
        state = {};
        champions.forEach(name => {
          state[name] = { w: 0, l: 0 };
        });
      }
      renderGrid();
    }

    renderGrid();
  </script>
</body>
</html>
